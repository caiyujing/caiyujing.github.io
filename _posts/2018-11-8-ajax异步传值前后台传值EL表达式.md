---
layout:     post
title:      ajaxå¼‚æ­¥ä¼ å€¼|å‰åå°ä¼ å€¼|ELè¡¨è¾¾å¼
subtitle:   ajaxå¼‚æ­¥ä¼ å€¼|å‰åå°ä¼ å€¼|ELè¡¨è¾¾å¼
date:       2018-11-8
author:     LY
header-img: img/post-bg-debug.png
catalog: true
tags:
    - java
    - å¼‚æ­¥
    - ajax
    - ä¼ å€¼
---

> åœ¨è¿™é‡Œå°å°æ¨èä¸‹æˆ‘çš„ä¸ªäººåšå®¢
>
> csdnï¼š[é›·å›­çš„csdnåšå®¢](https://blog.csdn.net/leiyuan2580)
>
> ä¸ªäººåšå®¢ï¼š[é›·å›­çš„ä¸ªäººåšå®¢](https://imlcl.store)
>
> ç®€ä¹¦ï¼š[é›·å›­çš„ç®€ä¹¦](https://www.jianshu.com/u/016322e40e1f)
>
> æŸå®ä¼˜æƒ ï¼š[ä¼˜æƒ ç½‘ç«™](www.innerstudent.group)

##### å†™åœ¨å‰é¢

æ˜¨å¤©å‘å¸ƒäº†ä¸€ç¯‡å…³äºajaxå¼‚æ­¥çš„æ–‡ç« ï¼Œä»Šå¤©å¥½å¤šäººç§ä¿¡æˆ‘å…³äºajaxå‰åå°æ•°æ®ä¼ é€’çš„é—®é¢˜ã€‚æˆ‘å°±ç»™å¤§å®¶å‡ºä¸€ç¯‡å…³äºå‰åå°æ•°æ®ä¼ é€’çš„æ–‡ç« ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼ï¼ï¼

## å¼‚æ­¥ä¼ å€¼

#### å‰å°å¾€åå°ä¼ å€¼å‘¢ï¼Œæœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œå¤§å®¶å¬æˆ‘ç»†ç»†é“æ¥ã€‚

1. ç¬¬ä¸€ç§å‘¢ï¼Œä¹Ÿæ˜¯æœ€ç®€å•çš„ä¸€ç§ï¼Œé€šè¿‡getæäº¤æ–¹å¼ï¼Œå°†å‚æ•°åœ¨é“¾æ¥ä¸­ä»¥é—®å·çš„å½¢å¼è¿›è¡Œä¼ é€’ã€‚

   ```javascript
   // å‰å°ä¼ å€¼æ–¹æ³•    
   // è§¦å‘è¯¥æ–¹æ³•è°ƒç”¨ajax
       function testAjax(yourData) {
           $.ajax({
               type: "get", // ä»¥getæ–¹å¼å‘èµ·è¯·æ±‚
               url: "/yourUrl?yourDataName=" + yourData, // å°†ä½ çš„è¯·æ±‚å‚æ•°ä»¥é—®å·æ‹¼æ¥åˆ°urlä¸­è¿›è¡Œå‚æ•°ä¼ é€’
               success(data) {
                   // dataä¸ºè¿”å›å€¼
                   // æˆåŠŸåçš„å›è°ƒæ–¹æ³•
               }
           })
       }
   ```

   ```java
   // åå°æ¥å€¼æ–¹æ³•
       @RequestMapping("/yourUrl")
       @ResponseBody
   // @RequestParam("yourData")æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå› ä¸ºä»–æŒ‡å®šäº†é“¾æ¥ä¸­çš„å‚æ•°åç§°
       public String yourUrl(@RequestParam("yourData") String yourData) {
           System.out.println(yourData);
           // è¿”å›å€¼å¯ä»¥è‡ªç”±å®šä¹‰
           return "SUCCESS";
       }
   ```

2. ç¬¬äºŒç§å‘¢ï¼Œæ˜¯å°†å‚æ•°ä½“ç°åˆ°é“¾æ¥ä¸­ï¼Œåœ¨åå°é€šè¿‡å ä½è¿›è¡Œä¼ é€’ã€‚

   ```javascript
   // å‰å°ä¼ å€¼æ–¹æ³•ï¼Œå…¶å®å¤§ä½“ä¸ä¸Šæ–¹ç›¸åŒåªéœ€æ³¨æ„urlå³å¯
   // è§¦å‘è¯¥æ–¹æ³•è°ƒç”¨ajax
       function testAjax(yourData) {
           $.ajax({
               type: "get", // ä»¥getæ–¹å¼å‘èµ·è¯·æ±‚
               url: "/yourUrl/"+yourData, // å°†ä½ çš„è¯·æ±‚å‚æ•°æ‹¼æ¥åˆ°urlä¸­è¿›è¡Œå‚æ•°ä¼ é€’
               success(data) {
                   // dataä¸ºè¿”å›å€¼
                   // æˆåŠŸåçš„å›è°ƒæ–¹æ³•
               }
           })
       }
   ```

   ```java
   // åå°æ¥å€¼æ–¹æ³•
       @RequestMapping("/yourUrl/{yourDataName}")
       @ResponseBody
   	// åŒæ ·@PathVariable("yourDataName")å¿…ä¸å¯å°‘ï¼Œå› ä¸ºä»–æŒ‡å®šé“¾æ¥ä¸­æŸä¸ªä½ç½®ä»£è¡¨ç€åä¸ºyourDataNameçš„å˜é‡
       public String yourUrl(@PathVariable("yourDataName") String yourData) {
           System.out.println(yourData);
           // è¿”å›å€¼å¯ä»¥è‡ªç”±å®šä¹‰
           return "SUCCESS";
       }
   ```

3. ç¬¬ä¸‰ç§å‘¢ï¼Œé€šè¿‡postæäº¤æ–¹å¼å°†formè¡¨å•ä¸­çš„æ•°æ®åºåˆ—åŒ–åä¼ é€’åˆ°åå°ã€‚

   ```javascript
   	// å‰å°ä¼ å€¼æ–¹æ³•
   	function testAjax() {
           $.ajax({
               type: "post", // ä»¥postæ–¹å¼å‘èµ·è¯·æ±‚
               url: "/yourUrl", // ä½ çš„è¯·æ±‚é“¾æ¥
               data:$("#myForm").serialize(), // å¯¹idä¸ºmyFormçš„è¡¨å•æ•°æ®è¿›è¡Œåºåˆ—åŒ–å¹¶ä¼ é€’åˆ°åå°
               success(data) {
                   // dataä¸ºè¿”å›å€¼
                   // æˆåŠŸåçš„å›è°ƒæ–¹æ³•
               }
           })
       }
   ```

   ```java
       // åå°æ¥å€¼æ–¹æ³•
   	@RequestMapping("/yourUrl")
       @ResponseBody
   	// åœ¨è¿™é‡Œæˆ‘å‡è®¾å¤§å®¶è¡¨å•æ•°æ®ä¸Userå®ä½“ç±»ç›¸å¯¹åº”
       public String yourUrl(User user) {
           System.out.println(user.toString());
           return "SUCCESS";
       }
   ```

4. ç¬¬å››ç§å‘¢ï¼Œå°±æ˜¯Ajaxå¼‚æ­¥ä¼ å€¼æœ€å¸¸è§çš„åœ¨ajaxæ–¹æ³•ä½“ä¸­ä½¿ç”¨dataè¿›è¡Œä¼ å€¼ã€‚

   ```javascript
   	// å‰å°ä¼ å€¼æ–¹æ³•
   	function testAjax() {
           $.ajax({
               type: "post", // ä»¥postæ–¹å¼å‘èµ·è¯·æ±‚
               url: "/yourUrl", // ä½ çš„è¯·æ±‚é“¾æ¥
               data: { // æäº¤æ•°æ®
                   "username": "admin", // å‰è€…ä¸ºå­—æ®µåï¼Œåè€…ä¸ºæ•°æ®
                   "password": "admin"
               },
               success(data) {
                   // dataä¸ºè¿”å›å€¼
                   // æˆåŠŸåçš„å›è°ƒæ–¹æ³•
               }
           })
       }
   ```

   ```java
   	// åå°æ¥å€¼æ–¹æ³•
   	@RequestMapping("/yourUrl")
       @ResponseBody
   	// åœ¨è¿™é‡Œæˆ‘å‡è®¾å¤§å®¶è¡¨å•æ•°æ®ä¸Userå®ä½“ç±»ç›¸å¯¹åº”
       public String yourUrl(@RequestParam("username") String username, @RequestParam("password") String password) {
           System.out.println("username="+username+";password="+password);
           return "SUCCESS";
       }
   ```


#### åå°å¾€å‰å°ä¼ å€¼å°±è¦ç®€å•ä¸€äº›ï¼Œå•ä¸ªæ•°æ®æˆ–è€…å°è£…æ•°æ®å¯ä»¥ç›´æ¥ä½¿ç”¨returnè¿”å›jsonæ•°æ®ç»™å‰å°ï¼Œå¦‚æœæ˜¯å¤šä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨PrintWriterè¿›è¡Œä¼ å€¼ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹

```java
PrintWriter out = response.getWriter();
try {
    out.write("yourWillReturnData");
} catch (Exception e) {
    e.printStackTrace();
}finally{
    out.close();
}
```

```javascript
// æ— è®ºé€šè¿‡é‚£ç§æ–¹å¼ï¼Œåªéœ€åœ¨å‰å°Ajaxå¾—successå›è°ƒæ–¹æ³•ä¸­å¯¹æ•°æ®è¿›è¡Œå¤„ç†å³å¯,æˆ‘ä»¬ä»¥userä¸ºä¾‹
success(user){
    alert("è¿”å›çš„ç”¨æˆ·åä¸º:"+user.username+"!!!å¯†ç ä¸º:"+user.password);
    // åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰“å°ç»“æœï¼Œç‚¹å‡»f12å¯ä»¥æŸ¥çœ‹
    console.log("è¿”å›çš„ç”¨æˆ·åä¸º:"+user.username+"!!!å¯†ç ä¸º:"+user.password);
}
```



## éå¼‚æ­¥æ–¹å¼ä¼ å€¼

#### éå¼‚æ­¥æ–¹å¼å‰å°ä¼ é€’å‚æ•°

1.ä¸å¼‚æ­¥æ–¹å¼ç±»ä¼¼ï¼Œä½¿ç”¨formç›´æ¥æäº¤æˆ–è€…åœ¨é“¾æ¥ä¸­æ‹¼æ¥å‚æ•°å³å¯ã€‚

```html
<!-- formè¡¨å•æäº¤ -->
<form id="myForm" class="layui-form" action="/yourUrl" method="post">
    <input type="text" name="username" required placeholder="é‚®ç®±"/>
    <input type="password" name="username" required placeholder="å¯†ç "/>
    <button type="submit" class="layui-btn">ç™»å½•</button>
</form>
<!-- aæ ‡ç­¾æ‹¼æ¥å‚æ•° -->
<a href="/yourUrl?youDataName=yourData">é—®å·ä¼ é€’å‚æ•°</a>
<a href="/yourUrl/yourData">æ‹¼æ¥é“¾æ¥ä¼ é€’å‚æ•°</a>
```

2.åå°æ¥å—å‚æ•°æ–¹å¼ä¸å˜ï¼Œä¸å¼‚æ­¥æ–¹å¼å®Œå…¨ç›¸åŒã€‚

#### éå¼‚æ­¥æ–¹å¼åå°å‘å‰å°ä¼ é€’æ•°æ®

```java
    // 1.å¯ä»¥é€šè¿‡sessionè¿›è¡Œå‚æ•°ä¼ é€’
	@RequestMapping("/yourUrl")
    public String yourUrl(HttpServletRequest request) {
        // é€šè¿‡requestè·å–sessionï¼Œç„¶åå‘sessionä¸­æ”¾å…¥å‚æ•°key-value
        request.getSession().setAttribute("yourDataName", "yourData");
        // è·³è½¬åˆ°ä½ çš„è§†å›¾
        return "/yourViews";
    }

	// 2.å¯ä»¥é€šè¿‡Modelè¿›è¡Œå‚æ•°ä¼ é€’
	@RequestMapping("/yourUrl")
    public String yourUrl(Model model) {
        // å‘modelä¸­åŠ å…¥å‚æ•°key-value
        model.addAttribute("yourDataName", "yourData");
        // è·³è½¬åˆ°ä½ çš„è§†å›¾
        return "/yourViews";
    }
	
	// 3.åŒæ ·å¯ä»¥ç”¨requestè¿›è¡Œå‚æ•°ä¼ é€’
	@RequestMapping("/yourUrl")
    public String yourUrl(HttpServletRequest request) {
        // é€šè¿‡requestæ”¾å…¥å‚æ•°key-value
        request.setAttribute("yourDataName", "yourData");
        // è·³è½¬åˆ°ä½ çš„è§†å›¾
        return "/yourViews";
    }
```

## ELè¡¨è¾¾å¼æ€ä¹ˆç”¨ï¼Ÿä¸ºä»€ä¹ˆELè¡¨è¾¾å¼ä¸èµ·ä½œç”¨ï¼Œé¡µé¢å±•ç¤ºä¸º${dataName}ï¼Ÿ

1.é¦–å…ˆELè¡¨è¾¾å¼ä¸èµ·ä½œç”¨å¯èƒ½æ˜¯ä½ åˆ›å»ºçš„jspæˆ–è€…htmlç‰ˆæœ¬æ¯”è¾ƒé«˜ï¼Œä»–è‡ªåŠ¨ç¦ç”¨äº†elè¡¨è¾¾å¼ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ã€‚ä½ åªéœ€è¦åœ¨ä½ çš„è§†å›¾å±‚å¢åŠ è¿™æ ·ä¸€æ®µä»£ç ã€‚

```html
<%@ page isELIgnored="false" %>
```

2.ELè¡¨è¾¾å¼çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Œå°±æ˜¯ä¸ºäº†é…åˆåå°ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œè®©ä»–ä»¬æœ‰æœºä¼šå±•ç¤ºåˆ°å¤§å®¶é¢å‰ã€‚

```html
<!-- æˆ‘ä»¬åœ¨è¿™é‡Œä»¥cæ ‡ç­¾çš„forå¾ªç¯ä¸ºä¾‹åšæ¼”ç¤º -->
<!-- é¦–å…ˆå¯¼å…¥cæ ‡ç­¾ -->
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!-- ç¼–å†™foreachå¾ªç¯-->
    <c:forEach items="${userList}" var="user">
        <input type="text" name="username" value="${user.username}"/>
        <input type="text" name="password" value="${user.password}"/>
    </c:forEach>
```

## å¼‚æ­¥è¯·æ±‚å®Œæˆåå¦‚ä½•è¿›è¡Œè·³è½¬ï¼Ÿ

1.é¦–å…ˆè¦æ˜ç¡®ï¼Œå¦‚æœä½ çš„è§†å›¾å±‚å…¨éƒ¨æ”¾åœ¨WEB-INFä¸­ï¼Œé‚£ä¹ˆä½ çš„è§†å›¾å±‚æ˜¯æ— æ³•ç›´æ¥è¿›è¡Œè·³è½¬çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¸èƒ½ç”±ä¸€ä¸ªjspè·³è½¬åˆ°å¦ä¸€ä¸ªjspï¼ŒhtmlåŒç†ã€‚springbooté¡¹ç›®ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœä½ æ˜¯springbooté¡¹ç›®ï¼Œæ¨èä½¿ç”¨thymeleafæ¨¡ç‰ˆå¼•æ“ã€‚

2.å¦‚æœä½ å¸Œæœ›åœ¨å›è°ƒæˆåŠŸä¹‹åè¿›è¡Œé¡µé¢è·³è½¬ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç å®ç°ï¼š

```javascript
// å‰å°ä»£ç 
success(user){
    alert("è¿”å›çš„ç”¨æˆ·åä¸º:"+user.username+"!!!å¯†ç ä¸º:"+user.password);
    // åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰“å°ç»“æœï¼Œç‚¹å‡»f12å¯ä»¥æŸ¥çœ‹
    console.log("è¿”å›çš„ç”¨æˆ·åä¸º:"+user.username+"!!!å¯†ç ä¸º:"+user.password);
    // æˆåŠŸå›è°ƒåè¿›è¡Œè·³è½¬
    window.location.href="/youWantToJumpUrl";
}
```

```java
	// åå°ä»£ç 
    @RequestMapping("/youWantToJumpUrl")
    public String youWantToJumpUrl() {
        // è·³è½¬åˆ°è§†å›¾å±‚
        return "/youWantToJumpView";
        // é‡å®šå‘ return "redirect:/youWantToJumpUrl";
    }
```

ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³è¦è·³è½¬é¡µé¢æˆ–è€…é‡å®šå‘åˆ°æŸä¸€ä¸ªæ–¹æ³•ï¼Œå¿…é¡»ç»è¿‡ä¸€æ¬¡æ§åˆ¶å±‚æ‰èƒ½å®ç°ã€‚

## ç»“æŸè¯­

è¿™ç¯‡æ–‡ç« å°±åˆ°è¿™é‡Œï¼Œéå¸¸æ„Ÿè°¢å¤§å®¶çš„å…³æ³¨ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ä¸æ˜ï¼Œå¯ä»¥ç§ä¿¡æˆ–è€…è¯„è®ºå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šä¸€ä¸€å›å¤ã€‚å†æ¬¡æ„Ÿè°¢å¤§å®¶ï¼ï¼ï¼ğŸ™